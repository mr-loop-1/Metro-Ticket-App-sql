<%- include('../include/header_nav.ejs') %>

<% if(!start || !end || !priced) { %>

    <div class="blog">
        <div class="container">
            <div class="section-header text-center">
                <p>Details Page</p>
                <h2>Please check your ticket details</h2>
                <br>
                <br>
                <h2>Looks like this page has been rendered out of intended flow or <span style="color: red">refreshed</span></h2>
                <br>
                <h2>Due to legacy reasons and avoid database costs, I have restricted its access through original flow only</h2>
            </div>
        </div>
    </div>

<% } else { %>

<div class="blog d-lg-flex half">
    <div class="contents order-2 order-md-1">
        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-7 py-5">
                    <h3>Your Details</h3>
                    <p class="mb-4">
                        Make sure to cross-check as no changes can be made after
                        confirmation
                    </p>

                    <form action="/booking/ticket" method="POST">
                        <fieldset>
                            <input
                                type="hidden"
                                name="start"
                                value="<%=start%>"
                            />
                            <input type="hidden" name="end" value="<%=end%>" />
                            <input
                                type="hidden"
                                name="price"
                                value="<%=priced%>"
                            />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group first">
                                        <label for="fname">First Name</label>
                                        <input
                                            type="text"
                                            class="form-control"
                                            placeholder="e.g. hello"
                                            id="fname"
                                            name="fname"
                                            minlength="1"
                                            maxlength="10"
                                            required
                                            <% if(id) { %>disabled<% } %>
                                        />
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group first">
                                        <label for="lname">Last Name</label>
                                        <input
                                            type="text"
                                            class="form-control"
                                            placeholder="e.g. world"
                                            id="lname"
                                            name="lname"
                                            minlength="1"
                                            maxlength="10"
                                            required
                                            <% if(id) { %>disabled<% } %>
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group first">
                                        <label for="phone">Contact</label>
                                        <input
                                            type="text"
                                            title="Please enter only digits"
                                            pattern="[0-9]*"
                                            class="form-control"
                                            placeholder="+00 0000 000 0000"
                                            id="phone"
                                            name="phone"
                                            minlength="7"
                                            maxlength="12"
                                            required
                                            <% if(id) { %>disabled<% } %>
                                        />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group first">
                                        <label for="lname">Date</label>
                                        <input
                                            type="date"
                                            class="date-control"
                                            id="myDate"
                                            name="myDate"
                                            readonly
                                        />
                                        <script>
                                            document.getElementById(
                                                "myDate"
                                            ).valueAsDate = new Date();
                                        </script>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="blog-item">
                                <div class="blog-title">
                                    <h3>Proceed to checkout</h3>
                                    <button class="btn2" type="submit" title="Already registered" <% if(id) { %>disabled<% } %> /><b
                                        >Go</b
                                    >
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="blog">
    <div class="container">
        <div class="row">
            <div class="col-lg-5 col-md-6" data-wow-delay="0.2s">
                <div class="blog-item">
                    <div class="blog-img4">
                        <div class="routedetails">
                            <p style="font-size: 20px; display: inline">
                                Your ticket will be confirmed for
                            </p>
                            <p style="font-size: 30px; display: inline">
                                <%= start %> station
                            </p>
                            <br />
                            <p style="font-size: 20px; display: inline">to</p>
                            <p style="font-size: 30px"><%= end %> station</p>
                            <p style="font-size: 20px">
                                @<%= priced %>.00 rupees <i>via</i> cash
                            </p>
                            <br />
                            <p style="font-size: 10px; display: inline"></p>
                            <p style="font-size: 20px; color: #fdbe33">
                                (5:00 AM - 11:00 PM)
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<% if(id != undefined){ %>

<div class="gradient-border" id="box">
    <b>Congratulations! <%= fname %> <%=lname%></b>
</div>

<div class="blog">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-md-6" data-wow-delay="0.2s">
                <div class="blog-item">
                    <div class="blog-img5">
                        <div class="routedetails">
                            <div class="blog">
                                <div class="container">
                                    <div class="section-header text-center">
                                        <br /><br /><br /><br />
                                        <h1>Ticket No. <%=id%></h1>
                                        <h4>
                                            You can verify your booking by using
                                            this no.
                                            <a
                                                href="/users/metro"
                                                style="color: blue"
                                                >here</a
                                            >
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<% } %>

<% } %> <%- include('../include/footer.ejs') %>
